# ============================================
# Environment
# ============================================
# Set to 'production' or 'prod' in production to enable security validations
ENVIRONMENT=development

# ============================================
# Database Configuration
# ============================================
# Neon PostgreSQL connection string
DATABASE_URL=postgresql://user:password@host/database?sslmode=require

# ============================================
# JWT Authentication
# ============================================
# CRITICAL: These MUST be set in production!
# Generate secure keys with: python -c "import secrets; print(secrets.token_hex(32))"

# Access token secret (30-minute tokens)
JWT_SECRET_KEY=your-secret-key-here-min-32-chars

# Refresh token secret (7-day tokens) - MUST be different from JWT_SECRET_KEY
JWT_REFRESH_SECRET_KEY=your-refresh-secret-key-here-min-32-chars

# Token expiration times (optional, defaults shown)
JWT_EXPIRE_MINUTES=30
JWT_REFRESH_EXPIRE_DAYS=7

# ============================================
# Email Verification
# ============================================
# Set to 'false' to disable email verification requirement (for development)
REQUIRE_EMAIL_VERIFICATION=true

# ============================================
# Account Security
# ============================================
# Account lockout after failed login attempts
MAX_FAILED_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15
FAILED_LOGIN_RESET_MINUTES=30

# CSRF Protection (disable for development if needed)
CSRF_ENABLED=true

# ============================================
# Database Migrations
# ============================================
# Required to run destructive migrations (e.g., dropping tables with data)
# Set to 'true' ONLY when you intentionally want to delete data
ALLOW_DESTRUCTIVE_MIGRATION=false

# Anthropic API (for Uniform Recognition feature)
# Required for Claude Vision API to analyze police uniforms, equipment, and insignia.
# Used to identify UK police forces (Met, City of London, BTP), tactical units (TSG, FIT),
# rank insignia (chevrons, pips), and equipment (shields, batons, body cameras).
# Get your key at: https://console.anthropic.com/
# Cost: ~$0.015 per image analysis (Claude claude-sonnet-4-20250514 with vision)
ANTHROPIC_API_KEY=sk-ant-api03-...

# Uniform Analysis Settings
# Controls whether uniform analysis runs automatically during video/image processing.
# When 'true': Every detected officer is automatically analyzed via Claude Vision API.
#              This provides comprehensive data but increases API costs significantly.
# When 'false': Analysis is on-demand only via the /appearances/{id}/analyze endpoint.
#               Recommended for cost control - users manually trigger analysis as needed.
# Default: false (to prevent unexpected API charges)
ENABLE_AUTO_UNIFORM_ANALYSIS=false

# Rate limit for uniform analysis API calls (requests per minute).
# Prevents excessive API usage and helps control costs during batch processing.
# Lower values (5-10): Safer for cost control, slower processing
# Higher values (20-30): Faster processing, higher potential costs
# Note: Claude API has its own rate limits; this is an additional application-level limit.
# Default: 10 (balanced between speed and cost control)
UNIFORM_ANALYSIS_RATE_LIMIT=10

# ============================================
# YouTube Download Settings (cookies.txt)
# ============================================
# For best YouTube download reliability, export browser cookies to backend/cookies.txt
#
# WHY: YouTube blocks automated downloads. Browser cookies prove you're a real user
#      and bypass age restrictions, geo-blocks, and bot detection.
#
# HOW TO EXPORT COOKIES:
# 1. Install browser extension: "Get cookies.txt LOCALLY" (Chrome/Firefox)
# 2. Go to youtube.com and ensure you're logged in
# 3. Click the extension icon and "Export" cookies
# 4. Save as: backend/cookies.txt (Netscape format)
#
# SECURITY NOTE: cookies.txt contains session tokens - keep it private!
# The file is already in .gitignore to prevent accidental commits.
#
# WITHOUT COOKIES: Many videos will fail with "403 Forbidden" errors
# WITH COOKIES: Most public YouTube videos should download successfully
